<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2010 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Language switcher template
 *
 * @see Mage_Page_Block_Switch
 */
?>
<?php if(count($this->getStores())>1): ?>
<div class="language-switcher">
    <div class="language-switcherA">
    <?php foreach ($this->getStores() as $k=>$_lang): ?>
        <?php if($_lang->getCode()=='phone'){continue;}?>
        <?php $_selected = ($_lang->getId() == $this->getCurrentStoreId()) ? 'selected"selected"' : '' ?>
        <a class="<?php echo $_selected ?>"  href="<?php echo $_lang->getCurrentUrl() ?>"><?php echo $this->htmlEscape($_lang->getName()) ?></a> &nbsp;&nbsp;    
    <?php endforeach; ?>
    </div>
</div>
<?php endif; ?>
<script type="text/javascript">
jQuery(function($){
	var bs={
	        versions:function(){
	            var u = navigator.userAgent, app = navigator.appVersion;
	            return {//移动终端浏览器版本信息
	                trident: u.indexOf('Trident') > -1, //IE内核
	                presto: u.indexOf('Presto') > -1, //opera内核
	                webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
	                gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
	                mobile: !!u.match(/AppleWebKit.*Mobile.*/)||!!u.match(/AppleWebKit/), //是否为移动终端
	                ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
	                android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
	                iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者QQHD浏览器
	                iPad: u.indexOf('iPad') > -1, //是否iPad
	                webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
	            };
	        }(),
	        language:(navigator.browserLanguage || navigator.language).toLowerCase()
	    } 
	    if(bs.versions.mobile){
	        if(bs.versions.android||bs.versions.iPhone||bs.versions.iPad||bs.versions.ios){
	            <?php header('Location: '.Mage::getBaseUrl().'?__store=phone');?>

	        }else{
	            <?php header('Location: '.Mage::getBaseUrl().'?__store=default');?>
	        }
	    }else{
	    	<?php header('Location: '.Mage::getBaseUrl().'?__store=default');exit;?>
		}
});

</script>